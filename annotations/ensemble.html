<!DOCTYPE html>  <html> <head>   <title>ensemble.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="ensemble.html">                 ensemble.coffee               </a>                                           <a class="source" href="gaia.html">                 gaia.coffee               </a>                                           <a class="source" href="itemerge.html">                 itemerge.coffee               </a>                                           <a class="source" href="points.html">                 points.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               ensemble.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nv">_ = </span><span class="nx">require</span> <span class="s1">&#39;underscore&#39;</span>
<span class="nv">Backbone = </span><span class="nx">require</span> <span class="s1">&#39;backbone&#39;</span>
<span class="nv">Itemerge = </span><span class="nx">require</span> <span class="s1">&#39;./itemerge&#39;</span>
<span class="nv">polyglot = </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;upon&#39;</span><span class="p">).</span><span class="nx">polyglot</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Mix of planets / dispositors (according to school) + other points of interest.
Anything that can be pointed to (by a point) is in this collection.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Ensemble</span> <span class="k">extends</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span>

  <span class="nv">model: </span><span class="nx">Itemerge</span>

  <span class="nv">inits:</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>The planets are in Chaldean order (of Nechepso) with the following attributes:</p>

<ol>
<li>Greek Vowel</li>
<li>Minor Period</li>
<li>Major Period</li>
<li>International Abbreviation ID</li>
<li>Swiss Ephemeris ID</li>
<li>Legendary Founder Name(s)</li>
<li>Greek Phonetic Name</li>
<li>Name (added based on language and school preference)</li>
</ol>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">planets:</span>
      <span class="nv">the: </span><span class="p">[</span> <span class="p">[</span> <span class="s2">&quot;Η&quot;</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="s2">&quot;MO&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;☽&quot;</span><span class="p">,</span> <span class="s2">&quot;Asklēpios&quot;</span><span class="p">,</span> <span class="s2">&quot;Selēnē&quot;</span> <span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;Ε&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span>  <span class="mi">76</span><span class="p">,</span> <span class="s2">&quot;ME&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;☿&quot;</span><span class="p">,</span> <span class="s2">&quot;Hermēs&quot;</span><span class="p">,</span> <span class="s2">&quot;Hermēs&quot;</span> <span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;Ι&quot;</span><span class="p">,</span>  <span class="mi">8</span><span class="p">,</span>  <span class="mi">82</span><span class="p">,</span> <span class="s2">&quot;VE&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;♀&quot;</span><span class="p">,</span> <span class="s2">&quot;Anubio&quot;</span><span class="p">,</span> <span class="s2">&quot;Aphrodite&quot;</span> <span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;Ω&quot;</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="s2">&quot;SO&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;☉&quot;</span><span class="p">,</span> <span class="s2">&quot;Nechepsō &amp; Petosiris&quot;</span><span class="p">,</span> <span class="s2">&quot;Hēlios&quot;</span> <span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;Α&quot;</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span>  <span class="mi">66</span><span class="p">,</span> <span class="s2">&quot;MA&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;♂&quot;</span><span class="p">,</span> <span class="s2">&quot;Abramos&quot;</span><span class="p">,</span> <span class="s2">&quot;Arēs&quot;</span> <span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;Υ&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span>  <span class="mi">79</span><span class="p">,</span> <span class="s2">&quot;JU&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;♃&quot;</span><span class="p">,</span> <span class="s2">&quot;Orpheus&quot;</span><span class="p">,</span> <span class="s2">&quot;Zeus&quot;</span> <span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;Ο&quot;</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span>  <span class="mi">57</span><span class="p">,</span> <span class="s2">&quot;SA&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s2">&quot;♄&quot;</span><span class="p">,</span> <span class="s2">&quot;Kritodēmos&quot;</span><span class="p">,</span> <span class="s2">&quot;Kronos&quot;</span> <span class="p">]</span>
           <span class="p">]</span>
      <span class="nv">add:</span>
        <span class="nv">traits: </span><span class="p">[</span> <span class="s2">&quot;traditional&quot;</span><span class="p">,</span> <span class="s2">&quot;planet&quot;</span><span class="p">,</span> <span class="s2">&quot;dispositor&quot;</span> <span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>The <code>planets.attributes.use</code>-ed by array index position -
do become instance data.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nv">attributes:</span>
        <span class="nv">key: </span><span class="s2">&quot;id&quot;</span>
        <span class="nv">use:</span>
          <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mi">3</span>
          <span class="s2">&quot;sid&quot;</span><span class="o">:</span> <span class="mi">4</span>
          <span class="s2">&quot;u&quot;</span><span class="o">:</span> <span class="mi">5</span>
          <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="kc">null</span> <span class="c1"># the last (not there yet), added / set upon instantiation</span>
          <span class="s2">&quot;minor&quot;</span><span class="o">:</span> <span class="mi">1</span>
          <span class="s2">&quot;major&quot;</span><span class="o">:</span> <span class="mi">2</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Related is for later - relations, etc.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">related:</span>
          <span class="s2">&quot;vowel&quot;</span><span class="o">:</span> <span class="mi">0</span>
          <span class="s2">&quot;founder&quot;</span><span class="o">:</span> <span class="mi">6</span>
          <span class="s2">&quot;phonetic&quot;</span><span class="o">:</span> <span class="mi">7</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Dispositors that aren't planets.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">dispositors:</span>
      <span class="nv">the: </span><span class="p">[</span> <span class="p">[</span> <span class="s2">&quot;NN&quot;</span><span class="p">,</span> <span class="s2">&quot;☊&quot;</span><span class="p">,</span> <span class="mi">11</span> <span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;SN&quot;</span><span class="p">,</span> <span class="s2">&quot;☋&quot;</span><span class="p">,</span> <span class="kc">null</span> <span class="p">]</span>
           <span class="p">]</span>
      <span class="nv">add:</span>
        <span class="nv">traits: </span><span class="p">[</span> <span class="s2">&quot;dispositor&quot;</span> <span class="p">]</span>
      <span class="nv">attributes:</span>
        <span class="nv">key: </span><span class="s2">&quot;id&quot;</span>
        <span class="nv">use:</span>
          <span class="nv">id: </span><span class="mi">0</span>
          <span class="nv">u: </span><span class="mi">1</span>
          <span class="nv">name: </span><span class="kc">null</span>
          <span class="nv">sid: </span><span class="mi">2</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Angles.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">angles:</span>
      <span class="nv">the: </span><span class="p">[</span> <span class="p">[</span> <span class="s2">&quot;AS&quot;</span><span class="p">,</span> <span class="s2">&quot;⇠&quot;</span> <span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;MC&quot;</span><span class="p">,</span> <span class="s2">&quot;⇡&quot;</span> <span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;DS&quot;</span><span class="p">,</span> <span class="s2">&quot;⇢&quot;</span> <span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;IC&quot;</span><span class="p">,</span> <span class="s2">&quot;⇣&quot;</span> <span class="p">]</span>
           <span class="p">]</span>
      <span class="nv">add:</span>
        <span class="nv">traits: </span><span class="p">[</span> <span class="s2">&quot;angle&quot;</span> <span class="p">]</span>
      <span class="nv">attributes:</span>
        <span class="nv">key: </span><span class="s2">&quot;id&quot;</span>
        <span class="nv">use:</span>
          <span class="nv">id: </span><span class="mi">0</span>
          <span class="nv">u: </span><span class="mi">1</span>
          <span class="nv">name: </span><span class="kc">null</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Outer planets.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">outers:</span>
      <span class="nv">the: </span><span class="p">[</span> <span class="p">[</span> <span class="s2">&quot;UR&quot;</span><span class="p">,</span> <span class="s2">&quot;♅&quot;</span><span class="p">,</span> <span class="mi">7</span> <span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;NE&quot;</span><span class="p">,</span> <span class="s2">&quot;♆&quot;</span><span class="p">,</span> <span class="mi">8</span> <span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;PL&quot;</span><span class="p">,</span> <span class="s2">&quot;♇&quot;</span><span class="p">,</span> <span class="mi">9</span> <span class="p">]</span>
           <span class="p">]</span>
      <span class="nv">add:</span>
        <span class="nv">traits: </span><span class="p">[</span> <span class="s2">&quot;modern&quot;</span><span class="p">,</span> <span class="s2">&quot;outer&quot;</span><span class="p">,</span> <span class="s2">&quot;planet&quot;</span> <span class="p">]</span>
      <span class="nv">attributes:</span>
        <span class="nv">key: </span><span class="s2">&quot;id&quot;</span>
        <span class="nv">use:</span>
          <span class="nv">id: </span><span class="mi">0</span>
          <span class="nv">sid: </span><span class="mi">2</span>
          <span class="nv">u: </span><span class="mi">1</span>
          <span class="nv">name: </span><span class="kc">null</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Modern - besides <em>planets</em>.
Notice how 10000 is added to objects above 10K.
Perhaps we need a separate key group so things match more intuitively.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">beyond:</span>
      <span class="nv">the: </span><span class="p">[</span> <span class="p">[</span> <span class="mi">15</span><span class="p">,</span>     <span class="s2">&quot;Chiron&quot;</span><span class="p">,</span>    <span class="s2">&quot;\u26B7&quot;</span><span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="mi">17</span><span class="p">,</span>     <span class="s2">&quot;Ceres&quot;</span><span class="p">,</span>     <span class="s2">&quot;\u26B3&quot;</span><span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="mi">18</span><span class="p">,</span>     <span class="s2">&quot;Pallas&quot;</span><span class="p">,</span>    <span class="s2">&quot;\u26B4&quot;</span><span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="mi">19</span><span class="p">,</span>     <span class="s2">&quot;Juno&quot;</span><span class="p">,</span>      <span class="s2">&quot;\u26B5&quot;</span><span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="mi">20</span><span class="p">,</span>     <span class="s2">&quot;Vesta&quot;</span><span class="p">,</span>     <span class="s2">&quot;\u26B6&quot;</span><span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="mi">10128</span><span class="p">,</span>  <span class="s2">&quot;Nemesis&quot;</span><span class="p">,</span>   <span class="s2">&quot;&quot;</span><span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="mi">17066</span><span class="p">,</span>  <span class="s2">&quot;Nessus&quot;</span><span class="p">,</span>    <span class="s2">&quot;&quot;</span><span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="mi">30000</span><span class="p">,</span>  <span class="s2">&quot;Varuna&quot;</span><span class="p">,</span>    <span class="s2">&quot;&quot;</span><span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="mi">60000</span><span class="p">,</span>  <span class="s2">&quot;Quaoar&quot;</span><span class="p">,</span>    <span class="s2">&quot;&quot;</span><span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="mi">100377</span><span class="p">,</span> <span class="s2">&quot;Sedna&quot;</span><span class="p">,</span>     <span class="s2">&quot;&quot;</span><span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="mi">146108</span><span class="p">,</span> <span class="s2">&quot;Haumea&quot;</span><span class="p">,</span>    <span class="s2">&quot;&quot;</span><span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="mi">146199</span><span class="p">,</span> <span class="s2">&quot;Eris&quot;</span><span class="p">,</span>      <span class="s2">&quot;&quot;</span><span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="mi">146472</span><span class="p">,</span> <span class="s2">&quot;Makemake&quot;</span><span class="p">,</span>  <span class="s2">&quot;&quot;</span><span class="p">]</span>
           <span class="p">]</span>
      <span class="nv">add:</span>
        <span class="nv">traits: </span><span class="p">[</span> <span class="s2">&quot;modern&quot;</span><span class="p">,</span> <span class="s2">&quot;outer&quot;</span> <span class="p">]</span>
      <span class="nv">attributes:</span>
        <span class="nv">key: </span><span class="s2">&quot;id&quot;</span>
        <span class="nv">use:</span>
          <span class="nv">id: </span><span class="mi">1</span>
          <span class="nv">sid: </span><span class="mi">0</span>
          <span class="nv">name: </span><span class="kc">null</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>System utility objects.  The spectrum of their meaning is TBD.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">utility:</span>
      <span class="nv">the: </span><span class="p">[</span> <span class="p">[</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;Use through `@getNone`.&quot;</span><span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;!&quot;</span><span class="p">,</span> <span class="s2">&quot;Use through `@getError`.&quot;</span><span class="p">]</span>
           <span class="p">,</span> <span class="p">[</span> <span class="s2">&quot;?&quot;</span><span class="p">,</span> <span class="s2">&quot;Use through `@getUnknown`.&quot;</span><span class="p">]</span>
           <span class="p">]</span>
      <span class="nv">add:</span>
        <span class="nv">traits: </span><span class="p">[]</span>
      <span class="nv">attributes:</span>
        <span class="nv">key: </span><span class="s2">&quot;id&quot;</span>
        <span class="nv">use:</span>
          <span class="nv">id: </span><span class="mi">0</span>
          <span class="nv">note: </span><span class="mi">1</span>
          <span class="nv">name: </span><span class="kc">null</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>See <em>upon/src/polyglot.coffee</em> for assumptions.
Try using different attributes.key for the various itemerge types.
This will come in handy for minor ojects and means a more uniform id (any)
can be selected instead of mixing ids, even if wthout the risk of overlap,
by which I mean accidentally colliding ids - unlikely, anyway.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">words:</span>
    <span class="nv">expect: </span><span class="p">[</span> <span class="s2">&quot;name&quot;</span> <span class="p">]</span>
    <span class="nv">filler: </span><span class="p">[</span> <span class="s2">&quot;id&quot;</span> <span class="p">]</span>
    <span class="nv">data:</span>

      <span class="s2">&quot;MO&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="s2">&quot;Selene&quot;</span><span class="p">,</span>         <span class="s2">&quot;Moon&quot;</span> <span class="p">]</span>
          <span class="nv">el: </span><span class="p">[</span> <span class="kc">true</span><span class="p">,</span>             <span class="s2">&quot;Σελήνη&quot;</span> <span class="p">]</span>
          <span class="nv">bg: </span><span class="p">[</span> <span class="s2">&quot;Селена&quot;</span><span class="p">,</span>         <span class="s2">&quot;Луна&quot;</span> <span class="p">]</span>
      <span class="s2">&quot;ME&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="s2">&quot;Hermes&quot;</span><span class="p">,</span>         <span class="s2">&quot;Mercury&quot;</span> <span class="p">]</span>
          <span class="nv">el: </span><span class="p">[</span> <span class="kc">true</span><span class="p">,</span>             <span class="s2">&quot;Ἑρμῆς&quot;</span> <span class="p">]</span>
          <span class="nv">bg: </span><span class="p">[</span> <span class="s2">&quot;Хермес&quot;</span><span class="p">,</span>         <span class="s2">&quot;Меркурий&quot;</span> <span class="p">]</span>
      <span class="s2">&quot;VE&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="s2">&quot;Aphrodite&quot;</span><span class="p">,</span>      <span class="s2">&quot;Venus&quot;</span> <span class="p">]</span>
          <span class="nv">el: </span><span class="p">[</span> <span class="kc">true</span><span class="p">,</span>             <span class="s2">&quot;Ἀφροδίτη&quot;</span> <span class="p">]</span>
          <span class="nv">bg: </span><span class="p">[</span> <span class="s2">&quot;Афродита&quot;</span><span class="p">,</span>       <span class="s2">&quot;Венера&quot;</span> <span class="p">]</span>
      <span class="s2">&quot;SO&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="s2">&quot;Helios&quot;</span><span class="p">,</span>         <span class="s2">&quot;Sun&quot;</span> <span class="p">]</span>
          <span class="nv">el: </span><span class="p">[</span> <span class="kc">true</span><span class="p">,</span>             <span class="s2">&quot;Ἥλιος&quot;</span> <span class="p">]</span>
          <span class="nv">bg: </span><span class="p">[</span> <span class="s2">&quot;Хелиос&quot;</span><span class="p">,</span>         <span class="s2">&quot;Слънце&quot;</span> <span class="p">]</span>
      <span class="s2">&quot;MA&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="s2">&quot;Ares&quot;</span><span class="p">,</span>           <span class="s2">&quot;Mars&quot;</span> <span class="p">]</span>
          <span class="nv">el: </span><span class="p">[</span> <span class="kc">true</span><span class="p">,</span>             <span class="s2">&quot;Ἄρης&quot;</span> <span class="p">]</span>
          <span class="nv">bg: </span><span class="p">[</span> <span class="s2">&quot;Арес&quot;</span><span class="p">,</span>           <span class="s2">&quot;Марс&quot;</span> <span class="p">]</span>
      <span class="s2">&quot;JU&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="s2">&quot;Zeus&quot;</span><span class="p">,</span>           <span class="s2">&quot;Jupiter&quot;</span> <span class="p">]</span>
          <span class="nv">el: </span><span class="p">[</span> <span class="kc">true</span><span class="p">,</span>             <span class="s2">&quot;Ζεύς&quot;</span> <span class="p">]</span>
          <span class="nv">bg: </span><span class="p">[</span> <span class="s2">&quot;Зевс&quot;</span><span class="p">,</span>           <span class="s2">&quot;Юпитер&quot;</span> <span class="p">]</span>
      <span class="s2">&quot;SA&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="s2">&quot;Kronos&quot;</span><span class="p">,</span>         <span class="s2">&quot;Saturn&quot;</span> <span class="p">]</span>
          <span class="nv">el: </span><span class="p">[</span> <span class="kc">true</span><span class="p">,</span>             <span class="s2">&quot;Κρόνος&quot;</span> <span class="p">]</span>
          <span class="nv">bg: </span><span class="p">[</span> <span class="s2">&quot;Кронос&quot;</span><span class="p">,</span>         <span class="s2">&quot;Сатурн&quot;</span> <span class="p">]</span>

      <span class="s2">&quot;NN&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="kc">true</span><span class="p">,</span>             <span class="s2">&quot;North Node&quot;</span> <span class="p">]</span>
      <span class="s2">&quot;SN&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="kc">true</span><span class="p">,</span>             <span class="s2">&quot;South Node&quot;</span> <span class="p">]</span>

      <span class="s2">&quot;AS&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="kc">false</span><span class="p">,</span>             <span class="s2">&quot;Ascendant&quot;</span> <span class="p">]</span>
      <span class="s2">&quot;MC&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="kc">false</span><span class="p">,</span>             <span class="s2">&quot;Midheaven&quot;</span> <span class="p">]</span>
      <span class="s2">&quot;DS&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="kc">false</span><span class="p">,</span>             <span class="s2">&quot;Descendant&quot;</span> <span class="p">]</span>
      <span class="s2">&quot;IC&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="kc">false</span><span class="p">,</span>             <span class="s2">&quot;Imum Coeli&quot;</span> <span class="p">]</span>

      <span class="s2">&quot;UR&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="kc">false</span><span class="p">,</span>            <span class="s2">&quot;Uranus&quot;</span> <span class="p">]</span>
      <span class="s2">&quot;NE&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="kc">false</span><span class="p">,</span>            <span class="s2">&quot;Neptune&quot;</span> <span class="p">]</span>
      <span class="s2">&quot;PL&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="kc">false</span><span class="p">,</span>            <span class="s2">&quot;Pluto&quot;</span> <span class="p">]</span>

      <span class="s2">&quot;-&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="kc">true</span><span class="p">,</span>             <span class="s2">&quot;None&quot;</span> <span class="p">]</span>
          <span class="nv">bg: </span><span class="p">[</span> <span class="kc">true</span><span class="p">,</span>             <span class="s2">&quot;Няма&quot;</span> <span class="p">]</span>
      <span class="s2">&quot;!&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="kc">true</span><span class="p">,</span>             <span class="s2">&quot;Error&quot;</span> <span class="p">]</span>
          <span class="nv">bg: </span><span class="p">[</span> <span class="kc">true</span><span class="p">,</span>             <span class="s2">&quot;Грешка&quot;</span> <span class="p">]</span>
      <span class="s2">&quot;?&quot;</span><span class="o">:</span>
        <span class="nv">name:</span>
          <span class="nv">en: </span><span class="p">[</span> <span class="kc">true</span><span class="p">,</span>             <span class="s2">&quot;Unknown&quot;</span> <span class="p">]</span>
          <span class="nv">bg: </span><span class="p">[</span> <span class="kc">true</span><span class="p">,</span>             <span class="s2">&quot;Незнайно&quot;</span> <span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Sometimes (only when testing?) Ensemble is instantiated without <code>@cosmos</code>.
The @language &amp; @school are optional - defaults set by <code>@translatable ()</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">initialize: </span><span class="nf">(models, @cosmos) -&gt;</span>
    <span class="k">if</span> <span class="nx">@cosmos</span><span class="o">?</span>
      <span class="vi">@school   = </span><span class="nx">@cosmos</span><span class="p">.</span><span class="nx">school</span>
      <span class="vi">@language = </span><span class="nx">@cosmos</span><span class="p">.</span><span class="nx">language</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Add <code>@words</code> translation.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span> <span class="err">@</span><span class="p">,</span> <span class="nx">polyglot</span><span class="p">.</span><span class="nx">ensure</span>
    <span class="nx">unless</span> <span class="nx">@translatable</span> <span class="nx">_</span><span class="p">.</span><span class="nx">values</span> <span class="nx">@inits</span>
      <span class="k">throw</span> <span class="s2">&quot;Itemerge stuff can&#39;t be named!&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Assemble the ensemble attributes for self-resetting with.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">e = </span><span class="p">[]</span>
    <span class="k">for</span> <span class="nx">init</span> <span class="k">in</span> <span class="nx">_</span><span class="p">.</span><span class="nx">values</span> <span class="nx">@inits</span>
      <span class="k">for</span> <span class="nx">item</span> <span class="k">in</span> <span class="nx">init</span><span class="p">.</span><span class="nx">the</span>
        <span class="nv">attributes = </span><span class="p">{}</span>
        <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">init</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">use</span>
          <span class="nx">attributes</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">item</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>All init.add is appended to the attributes
for <code>QueryCollection</code> filters and possibly other use
where the attributes are the same per init category.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">init</span><span class="p">.</span><span class="nx">add</span>
          <span class="nx">attributes</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span>

        <span class="nx">e</span><span class="p">.</span><span class="nx">push</span> <span class="nx">attributes</span>
    <span class="nx">@reset</span> <span class="nx">e</span>

    <span class="err">@</span> <span class="c1"># chainable</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>A more gracious (no <code>undefined</code>) <code>@get</code> - without overriding it.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">id: </span><span class="nf">(id) -&gt;</span> <span class="p">(</span><span class="nx">@get</span> <span class="nx">id</span><span class="p">)</span> <span class="o">?</span> <span class="nx">@getUnknown</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Get an item via sid.  It matches numbers as strings.
Returns <code>@getUnknown()</code> for <em>not found</em>.
There will be ephemeris objects with no corresponding Ensemble items.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">sid: </span><span class="nf">(id) -&gt;</span>
    <span class="nv">found = </span><span class="nx">@find</span> <span class="nf">(item) -&gt;</span> <span class="s2">&quot;#{item.get(&#39;sid&#39;)}&quot;</span> <span class="o">is</span> <span class="s2">&quot;#{id}&quot;</span>
    <span class="nx">found</span> <span class="o">?</span> <span class="nx">@getUnknown</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>TODO: this probably shouldn't return a new (copy), but a filtered collection
isn't a real collection with Underscore mixed in.  Would like to use
Backbone.Query, but it isn't a node module yet...</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">planets: </span><span class="o">-&gt;</span>
    <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span> <span class="nx">@filter</span> <span class="nf">(item) -&gt;</span>
      <span class="nx">_</span><span class="p">.</span><span class="nx">include</span> <span class="nx">item</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">traits</span><span class="p">,</span> <span class="s1">&#39;planet&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>The <em>'traditional' seven</em>.  Don't want to have a method for each traint...</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">seven: </span><span class="o">-&gt;</span>
    <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span> <span class="nx">@filter</span> <span class="nf">(item) -&gt;</span>
      <span class="nx">_</span><span class="p">.</span><span class="nx">include</span> <span class="nx">item</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">traits</span><span class="p">,</span> <span class="s1">&#39;traditional&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Needs improvement, just like <code>@seven</code> and <code>@planets</code> do.
TODO: furthermore, these functions can be added to <code>@</code> automatically...
All that's needed is make sure the <code>@inits</code> keys match what the methods
should be called.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">dispositors: </span><span class="o">-&gt;</span>
    <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span> <span class="nx">@filter</span> <span class="nf">(item) -&gt;</span>
      <span class="nx">_</span><span class="p">.</span><span class="nx">include</span> <span class="nx">item</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">traits</span><span class="p">,</span> <span class="s1">&#39;dispositor&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>The following get system objects whose <code>id</code>s are possibly subject to change.
The <code>@getNone</code> is needed for representations that have no exaltation
dispositor.  There may later be needed a different None as "Not Found" that
is different from being Unknown.  The meaning of all these will be
finalized as they become needed.  With the special getMethods (below),
The <code>id</code>s are completely arbitrary.
TODO: <code>getError</code>, at least, could take a string for logging, etc.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">getNone: </span><span class="o">-&gt;</span>
    <span class="nx">@get</span> <span class="s2">&quot;-&quot;</span>

  <span class="nv">getError: </span><span class="o">-&gt;</span>
    <span class="nx">@get</span> <span class="s2">&quot;!&quot;</span>

  <span class="nv">getUnknown: </span><span class="o">-&gt;</span>
    <span class="nx">@get</span> <span class="s2">&quot;?&quot;</span>


<span class="nv">module.exports = </span><span class="nx">Ensemble</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 