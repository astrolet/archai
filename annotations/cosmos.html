<!DOCTYPE html>  <html> <head>   <title>cosmos.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="cosmos.html">                 cosmos.coffee               </a>                                           <a class="source" href="ensemble.html">                 ensemble.coffee               </a>                                           <a class="source" href="itemerge.html">                 itemerge.coffee               </a>                                           <a class="source" href="points.html">                 points.coffee               </a>                                           <a class="source" href="theres.html">                 theres.coffee               </a>                                           <a class="source" href="zodiac.html">                 zodiac.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               cosmos.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nv">Backbone = </span><span class="nx">require</span> <span class="s1">&#39;backbone-rel&#39;</span>
<span class="nv">Ensemble = </span><span class="nx">require</span> <span class="s1">&#39;./ensemble&#39;</span>
<span class="nv">Zodiac   = </span><span class="nx">require</span> <span class="s1">&#39;./zodiac&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Celestial sphere stuff
unsure if the @level (regular vs 12th part) is in the representation or point
... probably point.rep vs point._12 is enough for addressing @level</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Point</span> <span class="k">extends</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">RelationalModel</span>

  <span class="nv">initialize: </span><span class="o">-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Builder class of the Cosmos, once created by the Demiurge</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Cosmos</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>The dispositors from PI to AQ as Zodiac initializes its representations.
Expected to vary at a later time, therefore the data is passed in from here.
The domicile and exaltation dispositors can be fully listed, while the
trigon lords, decanic faces and monomoria can be significantly shortened
if generated through various algorithms.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">dispositors:</span>
    <span class="nv">domicile:</span>
      <span class="p">[</span> <span class="s2">&quot;JU&quot;</span><span class="p">,</span> <span class="s2">&quot;MA&quot;</span><span class="p">,</span> <span class="s2">&quot;VE&quot;</span>
      <span class="p">,</span> <span class="s2">&quot;ME&quot;</span><span class="p">,</span> <span class="s2">&quot;MO&quot;</span><span class="p">,</span> <span class="s2">&quot;SO&quot;</span>
      <span class="p">,</span> <span class="s2">&quot;ME&quot;</span><span class="p">,</span> <span class="s2">&quot;VE&quot;</span><span class="p">,</span> <span class="s2">&quot;MA&quot;</span>
      <span class="p">,</span> <span class="s2">&quot;JU&quot;</span><span class="p">,</span> <span class="s2">&quot;SA&quot;</span><span class="p">,</span> <span class="s2">&quot;SA&quot;</span>
      <span class="p">]</span>
    <span class="nv">exaltation:</span>
      <span class="p">[</span> <span class="p">[</span><span class="s2">&quot;VE&quot;</span><span class="p">,</span> <span class="mi">27</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;SO&quot;</span><span class="p">,</span> <span class="mi">19</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;MO&quot;</span><span class="p">,</span>  <span class="mi">3</span><span class="p">]</span>
      <span class="p">,</span> <span class="p">[</span><span class="s2">&quot;NN&quot;</span><span class="p">,</span>  <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;JU&quot;</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> <span class="p">[</span> <span class="kc">null</span> <span class="p">]</span>
      <span class="p">,</span> <span class="p">[</span><span class="s2">&quot;ME&quot;</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;SA&quot;</span><span class="p">,</span> <span class="mi">21</span><span class="p">],</span> <span class="p">[</span> <span class="kc">null</span> <span class="p">]</span>
      <span class="p">,</span> <span class="p">[</span><span class="s2">&quot;SN&quot;</span><span class="p">,</span>  <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;MA&quot;</span><span class="p">,</span> <span class="mi">28</span><span class="p">],</span> <span class="p">[</span> <span class="kc">null</span> <span class="p">]</span>
      <span class="p">]</span>
    <span class="nv">trigons:</span>
      <span class="nv">F: </span><span class="p">{</span> <span class="nv">C: </span><span class="s2">&quot;SA&quot;</span><span class="p">,</span> <span class="nv">D: </span><span class="s2">&quot;SO&quot;</span><span class="p">,</span> <span class="nv">N: </span><span class="s2">&quot;JU&quot;</span> <span class="p">}</span>
      <span class="nv">E: </span><span class="p">{</span> <span class="nv">C: </span><span class="s2">&quot;MA&quot;</span><span class="p">,</span> <span class="nv">D: </span><span class="s2">&quot;VE&quot;</span><span class="p">,</span> <span class="nv">N: </span><span class="s2">&quot;MO&quot;</span> <span class="p">}</span>
      <span class="nv">A: </span><span class="p">{</span> <span class="nv">C: </span><span class="s2">&quot;JU&quot;</span><span class="p">,</span> <span class="nv">D: </span><span class="s2">&quot;SA&quot;</span><span class="p">,</span> <span class="nv">N: </span><span class="s2">&quot;ME&quot;</span> <span class="p">}</span>
      <span class="nv">W: </span><span class="p">{</span> <span class="nv">C: </span><span class="s2">&quot;MO&quot;</span><span class="p">,</span> <span class="nv">D: </span><span class="s2">&quot;VE&quot;</span><span class="p">,</span> <span class="nv">N: </span><span class="s2">&quot;MA&quot;</span> <span class="p">}</span>
    <span class="nv">confines:</span>
      <span class="nv">EC:</span>
        <span class="p">[</span> <span class="p">{</span> <span class="nv">VE: </span><span class="mi">12</span><span class="p">,</span> <span class="nv">JU: </span> <span class="mi">4</span><span class="p">,</span> <span class="nv">ME: </span><span class="mi">3</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">9</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">2</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">JU: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">VE: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">ME: </span><span class="mi">8</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">5</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">VE: </span> <span class="mi">8</span><span class="p">,</span> <span class="nv">ME: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">JU: </span><span class="mi">8</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">3</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">ME: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">JU: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">VE: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">7</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">6</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">MA: </span> <span class="mi">7</span><span class="p">,</span> <span class="nv">VE: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">ME: </span><span class="mi">6</span><span class="p">,</span> <span class="nv">JU: </span><span class="mi">7</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">4</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">JU: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">VE: </span> <span class="mi">5</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">7</span><span class="p">,</span> <span class="nv">ME: </span><span class="mi">6</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">6</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">ME: </span> <span class="mi">7</span><span class="p">,</span> <span class="nv">VE: </span><span class="mi">10</span><span class="p">,</span> <span class="nv">JU: </span><span class="mi">4</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">7</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">2</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">SA: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">ME: </span> <span class="mi">8</span><span class="p">,</span> <span class="nv">JU: </span><span class="mi">7</span><span class="p">,</span> <span class="nv">VE: </span><span class="mi">7</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">2</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">MA: </span> <span class="mi">7</span><span class="p">,</span> <span class="nv">VE: </span> <span class="mi">4</span><span class="p">,</span> <span class="nv">ME: </span><span class="mi">8</span><span class="p">,</span> <span class="nv">JU: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">6</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">JU: </span><span class="mi">12</span><span class="p">,</span> <span class="nv">VE: </span> <span class="mi">5</span><span class="p">,</span> <span class="nv">ME: </span><span class="mi">4</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">4</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">ME: </span> <span class="mi">7</span><span class="p">,</span> <span class="nv">JU: </span> <span class="mi">7</span><span class="p">,</span> <span class="nv">VE: </span><span class="mi">8</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">4</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">4</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">ME: </span> <span class="mi">7</span><span class="p">,</span> <span class="nv">VE: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">JU: </span><span class="mi">7</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">5</span> <span class="p">}</span>
        <span class="p">]</span>
      <span class="nv">PC:</span>
        <span class="p">[</span> <span class="p">{</span> <span class="nv">VE: </span> <span class="mi">8</span><span class="p">,</span> <span class="nv">JU: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">ME: </span><span class="mi">6</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">6</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">4</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">JU: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">VE: </span> <span class="mi">8</span><span class="p">,</span> <span class="nv">ME: </span><span class="mi">7</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">4</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">VE: </span> <span class="mi">8</span><span class="p">,</span> <span class="nv">ME: </span> <span class="mi">7</span><span class="p">,</span> <span class="nv">JU: </span><span class="mi">7</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">4</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">4</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">ME: </span> <span class="mi">7</span><span class="p">,</span> <span class="nv">JU: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">VE: </span><span class="mi">7</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">6</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">4</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">MA: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">JU: </span> <span class="mi">7</span><span class="p">,</span> <span class="nv">ME: </span><span class="mi">7</span><span class="p">,</span> <span class="nv">VE: </span><span class="mi">7</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">3</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">SA: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">ME: </span> <span class="mi">7</span><span class="p">,</span> <span class="nv">VE: </span><span class="mi">6</span><span class="p">,</span> <span class="nv">JU: </span><span class="mi">6</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">5</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">ME: </span> <span class="mi">7</span><span class="p">,</span> <span class="nv">VE: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">JU: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">6</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">6</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">SA: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">VE: </span> <span class="mi">5</span><span class="p">,</span> <span class="nv">JU: </span><span class="mi">8</span><span class="p">,</span> <span class="nv">ME: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">6</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">MA: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">JU: </span> <span class="mi">8</span><span class="p">,</span> <span class="nv">VE: </span><span class="mi">7</span><span class="p">,</span> <span class="nv">ME: </span><span class="mi">6</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">3</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">JU: </span> <span class="mi">8</span><span class="p">,</span> <span class="nv">VE: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">ME: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">6</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">5</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">VE: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">ME: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">JU: </span><span class="mi">7</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">6</span><span class="p">,</span> <span class="nv">SA: </span><span class="mi">5</span> <span class="p">}</span>
        <span class="p">,</span> <span class="p">{</span> <span class="nv">SA: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">ME: </span> <span class="mi">6</span><span class="p">,</span> <span class="nv">VE: </span><span class="mi">8</span><span class="p">,</span> <span class="nv">JU: </span><span class="mi">5</span><span class="p">,</span> <span class="nv">MA: </span><span class="mi">5</span> <span class="p">}</span>
        <span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>TODO add:</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">faces: </span><span class="kc">null</span>
    <span class="nv">monomoria: </span><span class="kc">null</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>What representation, face, portion each planet is dispositing
is added-up here in case we need it for reverse lookup.
TODO initialize with: _.union _.pluck(Ensemble.planets.the, 3), # ...
_.pluck(Ensemble.dispositors.the, x)</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">dispositing: </span><span class="p">{}</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Helpers for initializing the attributes of <code>@zodiac</code>, <code>@ensemble</code>, etc.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">determine:</span>
    <span class="nv">element: </span><span class="nf">(idz) -&gt;</span>
      <span class="k">switch</span> <span class="nx">idz</span> <span class="o">%</span> <span class="mi">4</span>
        <span class="k">when</span> <span class="mi">0</span> <span class="k">then</span> <span class="s2">&quot;W&quot;</span> <span class="c1"># Water-like</span>
        <span class="k">when</span> <span class="mi">1</span> <span class="k">then</span> <span class="s2">&quot;F&quot;</span> <span class="c1">#  Fire-like</span>
        <span class="k">when</span> <span class="mi">2</span> <span class="k">then</span> <span class="s2">&quot;E&quot;</span> <span class="c1"># Earth-like</span>
        <span class="k">when</span> <span class="mi">3</span> <span class="k">then</span> <span class="s2">&quot;A&quot;</span> <span class="c1">#   Air-like</span>
        <span class="k">else</span> <span class="k">throw</span> <span class="s2">&quot;Cannot determine element for representation number #{idz}.&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>TODO: do all attributes generation with the same function, as for example
Zodiac and Ensemble dispositors logic gets mixed-up for doing reverse too?
So far, having a separate dispositors module doesn't seem too justified...</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">zodiacAttributes: </span><span class="o">-&gt;</span>
    <span class="nv">zodiac = </span><span class="p">[]</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Collection data format for trigons is needed, hence <code>trigon_lords</code>,
ready for nesting into representations.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">trigon_lords = </span><span class="p">{}</span>
    <span class="k">for</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">lords</span> <span class="k">of</span> <span class="nx">@dispositors</span><span class="p">.</span><span class="nx">trigons</span>
      <span class="nx">trigon_lords</span><span class="p">[</span><span class="nx">element</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
      <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">lords</span>
        <span class="nx">trigon_lords</span><span class="p">[</span><span class="nx">element</span><span class="p">].</span><span class="nx">push</span> <span class="nv">id: </span><span class="nx">key</span><span class="p">,</span> <span class="nv">lord: </span><span class="nx">value</span>

    <span class="k">for</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">..</span><span class="mi">11</span><span class="p">]</span>
      <span class="nv">idz = </span><span class="k">if</span> <span class="nx">i</span> <span class="o">is</span> <span class="mi">0</span> <span class="k">then</span> <span class="mi">12</span> <span class="k">else</span> <span class="nx">i</span>
      <span class="nx">zodiac</span><span class="p">.</span><span class="nx">push</span> <span class="p">{}</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Reusable, attribute-generating helper calls.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">zodiac</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nv">element = </span><span class="nx">@determine</span><span class="p">.</span><span class="nx">element</span> <span class="nx">idz</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Inline (for now) logic to generate disposited <code>@zodiac</code> attributes
as well as <code>@dispositing</code> attributes for <code>@ensemble</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">for</span> <span class="nx">dispositor</span><span class="p">,</span> <span class="nx">data</span> <span class="k">of</span> <span class="nx">@dispositors</span>
        <span class="k">switch</span> <span class="nx">dispositor</span>
          <span class="k">when</span> <span class="s2">&quot;domicile&quot;</span>
            <span class="nv">value = </span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
            <span class="nv">reverse = </span><span class="nx">idz</span>
          <span class="k">when</span> <span class="s2">&quot;exaltation&quot;</span>
            <span class="nv">value = </span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="nv">reverse = </span><span class="nx">idz</span>
          <span class="k">when</span> <span class="s2">&quot;trigons&quot;</span>
            <span class="nv">value = </span><span class="nx">trigon_lords</span><span class="p">[</span><span class="nx">@determine</span><span class="p">.</span><span class="nx">element</span> <span class="nx">idz</span><span class="p">]</span>
            <span class="nv">reverse = </span><span class="kc">null</span> <span class="c1"># what to do with it?</span>
          <span class="k">when</span> <span class="s2">&quot;confines&quot;</span>
            <span class="nv">value = </span><span class="p">[]</span>
            <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">values</span> <span class="k">of</span> <span class="nx">data</span>
              <span class="nv">n = </span><span class="mi">1</span><span class="p">;</span> <span class="nv">last = </span><span class="mi">0</span>
              <span class="k">for</span> <span class="nx">lord</span><span class="p">,</span> <span class="nx">portions</span> <span class="k">of</span> <span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
                <span class="nv">idc = </span><span class="s2">&quot;#{key}-#{n++}&quot;</span>
                <span class="nv">from = </span><span class="nx">last</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="nv">till = </span><span class="nx">last</span> <span class="o">+</span> <span class="nx">portions</span>
                <span class="nv">last = </span><span class="nx">till</span>
                <span class="nx">value</span><span class="p">.</span><span class="nx">push</span>
                  <span class="nv">id: </span><span class="nx">idc</span>
                  <span class="nv">scheme: </span><span class="nx">key</span>
                  <span class="nv">portions: </span><span class="nx">portions</span>
                  <span class="nv">lord: </span><span class="nx">lord</span>
                  <span class="nv">from: </span><span class="nx">from</span>
                  <span class="nv">till: </span><span class="nx">till</span>
            <span class="nv">reverse = </span><span class="kc">null</span> <span class="c1"># kind of similar unknown...</span>
          <span class="k">else</span> <span class="k">continue</span>
        <span class="nx">zodiac</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">dispositor</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>The following @dispositing is yet to be finalized...</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="nx">value</span> <span class="o">isnt</span> <span class="kc">null</span> <span class="o">and</span> <span class="nx">reverse</span> <span class="o">isnt</span> <span class="kc">null</span>
          <span class="nx">@dispositing</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">?=</span> <span class="p">{}</span> <span class="c1"># initialize(d) from elsewhere?</span>
          <span class="nx">@dispositing</span><span class="p">[</span><span class="nx">value</span><span class="p">][</span><span class="nx">dispositor</span><span class="p">]</span> <span class="o">=</span> <span class="nx">reverse</span>

    <span class="nx">zodiac</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Note: the preferences would eventually come from a real
School + User (more models / collections to do).
Also, for some reason polyglot doesn't like doublely-<code>undefined</code> language,
which is not a problem, because Cosmos will know its preferences.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">constructor: </span><span class="nf">(@language = &quot;en&quot;, @school) -&gt;</span>
    <span class="vi">@zodiac = </span><span class="k">new</span> <span class="nx">Zodiac</span> <span class="kc">null</span><span class="p">,</span> <span class="err">@</span><span class="p">,</span> <span class="nx">@zodiacAttributes</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>TODO: @dispositing attributes to instantiate Ensemble with.
The <code>id</code>s are probably also needed, because <code>@ensemble</code> will contain
more than just dispositors...</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="vi">@ensemble = </span><span class="k">new</span> <span class="nx">Ensemble</span> <span class="kc">null</span><span class="p">,</span> <span class="err">@</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>(re?)-does Demiurge's work</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">recreate: </span><span class="o">-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>makes a point that points to an item from the ensemble</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">point: </span><span class="nf">(ephemeris_id) -&gt;</span>


<span class="nv">module.exports = </span><span class="nx">Cosmos</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 